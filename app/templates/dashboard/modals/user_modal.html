<!-- 用户模态框 -->
<div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title d-flex align-items-center" id="userModalLabel">
          <i class='bx bx-user-plus me-2'></i>
          <span id="modalTitle">添加用户</span>
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="关闭"></button>
      </div>
      
      <div class="modal-body">
        <form id="userForm">
          <input type="hidden" id="userId" name="userId">
          
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="username" class="form-label">
                  <i class='bx bx-user me-1'></i>用户名
                </label>
                <input type="text" class="form-control" id="username" name="username" required 
                       placeholder="请输入用户名">
                <div class="invalid-feedback">
                  请输入有效的用户名
                </div>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="mb-3">
                <label for="email" class="form-label">
                  <i class='bx bx-envelope me-1'></i>邮箱地址
                </label>
                <input type="email" class="form-control" id="email" name="email" required 
                       placeholder="请输入邮箱地址">
                <div class="invalid-feedback">
                  请输入有效的邮箱地址
                </div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <div class="mb-3">
                <label for="password" class="form-label">
                  <i class='bx bx-lock me-1'></i>密码
                </label>
                <div class="input-group">
                  <input type="password" class="form-control" id="password" name="password" 
                         placeholder="请输入密码">
                  <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                    <i class='bx bx-show'></i>
                  </button>
                </div>
                <div class="form-text">
                  <small class="text-muted">编辑用户时留空表示不修改密码</small>
                </div>
                <div class="invalid-feedback">
                  密码长度至少6位
                </div>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="mb-3">
                <label for="role" class="form-label">
                  <i class='bx bx-shield me-1'></i>用户角色
                </label>
                <select class="form-select" id="role" name="role" required>
                  <option value="">请选择角色</option>
                  <option value="admin">超级管理员</option>
                  <option value="manager">管理员</option>
                  <option value="user">普通用户</option>
                  <option value="guest">访客</option>
                </select>
                <div class="invalid-feedback">
                  请选择用户角色
                </div>
              </div>
            </div>
          </div>
          
          <div class="row">
            <div class="col-12">
              <div class="mb-3">
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="isActive" name="isActive" checked>
                  <label class="form-check-label" for="isActive">
                    <i class='bx bx-check-circle me-1'></i>启用用户账户
                  </label>
                </div>
                <div class="form-text">
                  <small class="text-muted">禁用的用户将无法登录系统</small>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      
      <div class="modal-footer bg-light">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          <i class='bx bx-x me-1'></i>取消
        </button>
        <button type="submit" class="btn btn-primary" id="saveUserBtn" form="userForm">
          <i class='bx bx-save me-1'></i>
          <span id="saveButtonText">保存用户</span>
        </button>
      </div>
    </div>
  </div>
</div>